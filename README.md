# Test app for company Inside

docker repository maksmerfy/testappforinside:latest

Приложение построено с использованием Spring Boot, Spring Security и PostgreSQL.
Адрес сервера базы данных 194.58.101.68.
На сервере используется PostgreSQL 13.4.
Основная база данных приложения "forinside". 
Основная база данных приложения для тестов "forinsidetest".

Основные HTTP POST эндпоинты "/login" и "/message"

## Описание эндпоинтов :

### "/login"

* На вход принимаются json в формате :
*
    * {
      "name": "имя отправителя",
      "password": "пароль"
      }
*
    *
        * Если пользователя не существует в базе, то он автоматически регистрируется с данным паролем.
*
    *
        * Если пользователь существует в базе :
*
    *
        * Если пароль совпадает с паролем в базе то возвращается ответ :
*
    *
        *
            * { "token": "Сгенерированный токен" }
*
    *
        * Если пароли не совпадают :
*
    *
        *
            * { "token": "" }

### "/message"

* На вход принимаются json в формате :
*
    * {
      "name": "имя отправителя",
      "message": "текст сообщение"
      }
* Данный эндпоинт доступен только с аутентификацией **Bearer token**
* При успешной авторизации и совпадении имени отправителя в токене с именем отправителя во входных параметрах :
*
    * Если value параметра message является подобным "history 10" :
*
    *
        * В ответ получаем json типа :
*
    *
        * {
          "status": "OK",
          "data": [
          "test massage 7",
          "test massage 6",
          "test massage 5",
          "test massage 4",
          "test massage 3"
          ]
          }
*
    *
        *
            * Если входные параметры не правильные то получим ответ :
*
    *
        *
            * {
              "status": "BAD_REQUEST",
              "data": null }
*
    * В других видах значения параметра message значение запишется в базу и отдаст ответ :
*
    *
        * {
          "status": "OK",
          "data": null }
* В случае не совпадения токена с именем в параметрах, пустом сообщении или других случаях будет получен ответ :
*
    * {
      "status": "BAD_REQUEST",
      "data": null }

## Запуск приложения

* Запуск возможен через idea. 
* Так же возможен запуск через докер скачав образ с репозитория. Команда для запуска "docker run --tty --publish 8080:8080 [ИмяОбраза]"
* Протестировать приложение можно по адресу https://testappforinside.jelastic.regruhosting.ru/
